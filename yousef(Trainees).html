<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trainees Page</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      text-align: center;
      background-color: #5a5757;
      color: white;
    }

    #d1 {
      background-color: rgb(0, 68, 71);
    }

    h1 {
      color: rgb(194, 193, 193);
      border-color: #366e70;
      border-width: 6px;
      font-weight: bolder;
    }

    hr {
      margin: 20px 0;
      border: 0;
      border-top: 1px solid #ccc;
    }

    button {
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
    }

    #addNewStudent,
    #addNewTask,
    #addNewFeedback {
      display: none;
      margin: 20px auto;
      max-width: 400px;
      padding: 20px;
      border: 1px solid #000000;
      border-radius: 5px;
      border-width: 4px;
      background-color: #5a5757;
    }

    ::placeholder {
      color: rgb(216, 209, 209);
    }

    label {
      display: block;
      margin-bottom: 5px;
      text-align: left;
      color: white;
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      box-sizing: border-box;
      background-color: #333;
      color: rgb(216, 209, 209);
      border: none;
      border-radius: 3px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      border: solid;
      border-color: #ccc;
    }

    th,
    td {
      border: 1px solid #fff;
      padding: 8px;
      text-align: center;
    }

    th {
      background-color: rgb(0, 68, 71);
      color: white;
    }

    tr:nth-child(even) {
      background-color: #792d2d;

    }


    tr:nth-child(odd) {
      background-color: rgb(14, 72, 77);
    }

    button {
      background-color: #11abb0;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0c7a7e;
    }

    .Btn {
      background-color: #611f1f;
    }

    .Btn:hover {
      background-color: #a05454;
    }
  </style>
</head>

<body>
  <!-- Header section -->
  <div id="d1">
    <h1>Trainees Page</h1>
  </div>
  <hr>

  <!-- Buttons for adding student, task, and feedback -->
  <button onclick="showStudentInput()">Add Student</button>
  <button onclick="showTaskInput()">Add Task</button>
  <button onclick="showFeedbackInput()">Add Feedback</button>

  <!-- Form for adding a new student -->
  <div id="addNewStudent">
    <label for="studentName">Student Name:</label>
    <input type="text" id="studentName" name="studentName" placeholder="Enter student name">
    <label for="studentID">Student ID:</label>
    <input type="number" id="studentID" min="1" name="studentID" placeholder="Enter student ID">
    <label for="s_task">Task:</label>
    <input type="number" id="s_task" min="0" name="s_task" placeholder="Enter task">
    <label for="absent">Absent:</label>
    <input type="number" id="absent" min="0" name="absent" placeholder="Enter absent">
    <div><button onclick="AddtoTable()">Save</button></div>
  </div>

  <!-- Form for adding a new task -->
  <div id="addNewTask">
    <label for="task">Add New Task:</label>
    <input type="number" id="newTaskInput" min="0" name="newTaskInput" placeholder="Enter task">
    <div><button onclick="updateAllTasks()">Save</button></div>
  </div>

  <!-- Form for adding new feedback -->
  <div id="addNewFeedback">
    <label for="studentDropdown">Student Name:
      <select id="studentDropdown">
        <option>Kareem Alskafi</option>
        <option>Ayman Ali</option>
        <option>Yousef Aldeeb</option>
        <option>Abdullah AbuArab</option>
        <option>Haitham Alhrawi</option>
      </select>
    </label> <br>
    <textarea id="Feedback" name="Feedback" maxlength="120" cols="25" rows="6">Please write a feedback</textarea>
    <div><button onclick="addFeedback()">Save</button></div>
</div>

  <!-- Table for displaying trainees' information -->
  <table id="traineesTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Solved Tasks</th>
        <th>counter of solved Tasks</th>
        <th>Total Task</th>
        <th>Number of Absence</th>
        <th>counter of Absence</th>
        <th>Remove</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>


  <script>
    var totalTask = 20;
    // Function to show student input
    function showStudentInput() {
      // Get the student input div
      var student = document.getElementById("addNewStudent");

      // Toggle the display property
      student.style.display = student.style.display === "none" ? "block" : "none";
    }

    // Function to show task input
    function showTaskInput() {
      // Get the task input div
      var task = document.getElementById("addNewTask");

      // Toggle the display property
      task.style.display = task.style.display === "none" ? "block" : "none";
    }

    // Function to show feedback input
    function showFeedbackInput() {
      // Get the feedback input div
      var feedback = document.getElementById("addNewFeedback");

      // Toggle the display property
      feedback.style.display = feedback.style.display === "none" ? "block" : "none";
    }

    // Function to add a new row to the table
    function AddtoTable() {
      // Get input values
      var studentName = document.getElementById("studentName").value;
      var studentID = document.getElementById("studentID").value;
      var taskValue = document.getElementById("s_task").value;
      var absent = document.getElementById("absent").value;
     var studentTasks = {};
     var newStudent = false;

     console.log(studentID);

// Check if the student ID is already in the object
if (studentTasks[studentID]) {
  // Update the tasks array for the existing student
  studentTasks[studentID] = (totalTask + parseInt(taskValue));
} else {
  // Create a new tasks array for the student
  studentTasks[studentID] = totalTask + parseInt(taskValue);
  newStudent = true;
}

  if (newStudent) {
      // Get the table and its body
      var table = document.getElementById("traineesTable").getElementsByTagName('tbody')[0];

      // Insert a new row
      var newRow = table.insertRow(table.rows.length);

      // Insert cells into the new row
      var idCell = newRow.insertCell(0);
      var nameCell = newRow.insertCell(1);
      var solvedTasksCell = newRow.insertCell(2);
      var counterS_task = newRow.insertCell(3); // counter for solved task 
      var totalTaskCell = newRow.insertCell(4);
      var numberOfAbsenceCell = newRow.insertCell(5);
      var counterAbsent = newRow.insertCell(6); // counter of absence student
      var removeCell = newRow.insertCell(7);  // button for removing row


      // Populate cells with values
      idCell.innerHTML = studentID;
      nameCell.innerHTML = studentName;
      solvedTasksCell.innerHTML = 0;
      counterS_task.innerHTML = '<button onclick="counterS_task(this)" class="Btn">(+)</button>';
      totalTaskCell.innerHTML = studentTasks[studentID];
      numberOfAbsenceCell.innerHTML = absent;
      counterAbsent.innerHTML = '<button onclick="counterAbsent(this)" class="Btn">(+)</button>';
      removeCell.innerHTML = '<button onclick="removeRow(this)" id="btnR">Remove</button>';
  }

      console.log(studentTasks);
    }

    // Function to increment the absence counter
    function counterAbsent(button) {
      // Get the row of the clicked button
      var row = button.parentNode.parentNode;

      // Get the cell containing the absence number
      var counterAbsentCell = row.cells[5];

      // Get the current number of absense
      var currentCount = parseInt(counterAbsentCell.innerText);

      // Increment the count
      currentCount++;

      // Update the cell with the new count
      counterAbsentCell.innerText = currentCount;
    }

    // Function to increment the solved tasks counter
    function counterS_task(button) {
      // Get the row of the clicked button
      var row = button.parentNode.parentNode;

      // Get the cell containing the solved tasks counter
      var counterS_taskCell = row.cells[2];

      // Get the current count
      var currentCount = parseInt(counterS_taskCell.innerText);

      // Increment the count
      currentCount++;

      // Update the cell with the new count
      counterS_taskCell.innerText = currentCount;
    }

    // Function to remove a row
    function removeRow(button) {
      // Get the row of the clicked button
      var row = button.parentNode.parentNode;

      // Remove the row from its parent (the table body)
      row.parentNode.removeChild(row);
    }

    // Function to update total tasks for all rows
    function updateAllTasks() {
      // Get the table body
      var tableBody = document.getElementById("traineesTable").getElementsByTagName('tbody')[0];

      // Get all rows in the table body
      var rows = tableBody.getElementsByTagName('tr');

      // Get the new task input value
      var newTask = document.getElementById("newTaskInput").value;

      // Loop through each row
      for (var i = 0; i < rows.length; i++) {
        var row = rows[i];

        // Get the total task cell for the current row
        var totalTaskCell = row.cells[4];

        // Update the total task based on the new task input
        var currentTotalTasks = parseInt(totalTaskCell.innerText) || 0;
        var updatedTotalTasks = currentTotalTasks + parseInt(newTask);

        // Update the total task cell with the new value
        totalTaskCell.innerText = updatedTotalTasks;
      }
    }

<<<<<<< Updated upstream
      #d1 {
        background-color: rgb(0, 68, 71);
      }

      h1 {
        color: rgb(194, 193, 193);
        border-color: #366e70;
        border-width: 6px;
        font-weight: bolder;
      }

      hr {
        margin: 20px 0;
        border: 0;
        border-top: 1px solid #ccc;
      }

      button {
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px;
      }

      #addNewStudent,
      #addNewTask,
      #addNewFeedback {
        display: none;
        margin: 20px auto;
        max-width: 400px;
        padding: 20px;
        border: 1px solid #000000;
        border-radius: 5px;
        border-width: 4px;
        background-color: #5a5757;
      }

      ::placeholder {
        color: rgb(216, 209, 209);
      }

      label {
        display: block;
        margin-bottom: 5px;
        text-align: left;
        color: white;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        box-sizing: border-box;
        background-color: #333;
        color: rgb(216, 209, 209);
        border: none;
        border-radius: 3px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        border: solid;
        border-color: #ccc;
      }

      th,
      td {
        border: 1px solid #fff;
        padding: 8px;
        text-align: center;
      }

      th {
        background-color: rgb(0, 68, 71);
        color: white;
      }

      tr:nth-child(even) {
        background-color: #792d2d;
      }

      tr:nth-child(odd) {
        background-color: rgb(14, 72, 77);
      }

      button {
        background-color: #11abb0;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      button:hover {
        background-color: #0c7a7e;
      }

      .Btn {
        background-color: #611f1f;
      }

      .Btn:hover {
        background-color: #a05454;
      }
    </style>
  </head>

  <body>
    <!-- Header section -->
    <div id="d1">
      <h1>Trainees Page</h1>
    </div>
    <hr />

    <!-- Buttons for adding student, task, and feedback -->
    <button onclick="showStudentInput()">Add Student</button>
    <button onclick="showTaskInput()">Add Task</button>
    <button onclick="showFeedbackInput()">Add Feedback</button>

    <!-- Form for adding a new student -->
    <div id="addNewStudent">
      <label for="studentName">Student Name:</label>
      <input
        type="text"
        id="studentName"
        name="studentName"
        placeholder="Enter student name"
      />
      <label for="studentID">Student ID:</label>
      <input
        type="number"
        id="studentID"
        min="1"
        name="studentID"
        placeholder="Enter student ID"
      />
      <label for="s_task">Task:</label>
      <input
        type="number"
        id="s_task"
        min="0"
        name="s_task"
        placeholder="Enter task"
      />
      <label for="absent">Absent:</label>
      <input
        type="number"
        id="absent"
        min="0"
        name="absent"
        placeholder="Enter absent"
      />
      <div><button onclick="AddtoTable()">Save</button></div>
    </div>

    <!-- Form for adding a new task -->
    <div id="addNewTask">
      <label for="task">Add New Task:</label>
      <input
        type="number"
        id="newTaskInput"
        min="0"
        name="newTaskInput"
        placeholder="Enter task"
      />
      <div><button onclick="updateAllTasks()">Save</button></div>
    </div>

    <!-- Form for adding new feedback -->
    <div id="addNewFeedback">
      <label for="studentDropdown"
        >Student Name:
        <select id="studentDropdown">
          <option>Kareem Alskafi</option>
          <option>Ayman Ali</option>
          <option>Yousef Aldeeb</option>
          <option>Abdullah AbuArab</option>
          <option>Haitham Alhrawi</option>
        </select>
      </label>
      <br />
      <textarea
        id="Feedback"
        name="Feedback"
        maxlength="120"
        cols="25"
        rows="6"
      >
Please write a feedback</textarea
      >
      <div><button onclick="addFeedback()">Save</button></div>
    </div>

    <!-- Table for displaying trainees' information -->
    <table id="traineesTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Solved Tasks</th>
          <th>counter of solved Tasks</th>
          <th>Total Task</th>
          <th>Number of Absence</th>
          <th>counter of Absence</th>
          <th>Remove</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      var totalTask = 20;
      // Function to show student input
      function showStudentInput() {
        // Get the student input div
        var student = document.getElementById("addNewStudent");

        // Toggle the display property
        student.style.display =
          student.style.display === "none" ? "block" : "none";
      }

      // Function to show task input
      function showTaskInput() {
        // Get the task input div
        var task = document.getElementById("addNewTask");

        // Toggle the display property
        task.style.display = task.style.display === "none" ? "block" : "none";
      }

      // Function to show feedback input
      function showFeedbackInput() {
        // Get the feedback input div
        var feedback = document.getElementById("addNewFeedback");

        // Toggle the display property
        feedback.style.display =
          feedback.style.display === "none" ? "block" : "none";
      }

      // Function to add a new row to the table
      function AddtoTable() {
        // Get input values
        var studentName = document.getElementById("studentName").value;
        var studentID = document.getElementById("studentID").value;
        var taskValue = document.getElementById("s_task").value;
        var absent = document.getElementById("absent").value;





        
        var studentTasks = {};


// Check if the student ID is already in the object
if (studentTasks[studentID]) {
  // Update the tasks array for the existing student
  studentTasks[studentID] = (totalTask + parseInt(taskValue));
} else {
  // Create a new tasks array for the student
  studentTasks[studentID] = totalTask + parseInt(taskValue);
  newStudent = true;
}






        // Check if the student ID is already in the object
   
        // if (studentTasks) {
        //   // Update the tasks array for the existing student
        //   studentTasks[studentID].push(totalTask + parseInt(taskValue));
        // } else {
        //   // Create a new tasks array for the student
        //   studentTasks[studentID] = [totalTask + parseInt(taskValue)];
        // }

        // Get the table and its body
        var table = document
          .getElementById("traineesTable")
          .getElementsByTagName("tbody")[0];

        // Insert a new row
        var newRow = table.insertRow(table.rows.length);

        // Insert cells into the new row
        var idCell = newRow.insertCell(0);
        var nameCell = newRow.insertCell(1);
        var solvedTasksCell = newRow.insertCell(2);
        var counterS_task = newRow.insertCell(3); // counter for solved task
        var totalTaskCell = newRow.insertCell(4);
        var numberOfAbsenceCell = newRow.insertCell(5);
        var counterAbsent = newRow.insertCell(6); // counter of absence student
        var removeCell = newRow.insertCell(7); // button for removing row

        // Populate cells with values
        idCell.innerHTML = studentID;
        nameCell.innerHTML = studentName;
        solvedTasksCell.innerHTML = 0;
        counterS_task.innerHTML =
          '<button onclick="counterS_task(this)" class="Btn">(+)</button>';
        totalTaskCell.innerHTML = studentTasks[studentID];
        numberOfAbsenceCell.innerHTML = absent;
        counterAbsent.innerHTML =
          '<button onclick="counterAbsent(this)" class="Btn">(+)</button>';
        removeCell.innerHTML =
          '<button onclick="removeRow(this)" id="btnR">Remove</button>';

        console.log(studentTasks);
      }

      // Function to increment the absence counter
      function counterAbsent(button) {
        // Get the row of the clicked button
        var row = button.parentNode.parentNode;

        // Get the cell containing the absence number
        var counterAbsentCell = row.cells[5];

        // Get the current number of absense
        var currentCount = parseInt(counterAbsentCell.innerText);

        // Increment the count
        currentCount++;

        // Update the cell with the new count
        counterAbsentCell.innerText = currentCount;
      }

      // Function to increment the solved tasks counter
      function counterS_task(button) {
        // Get the row of the clicked button
        var row = button.parentNode.parentNode;

        // Get the cell containing the solved tasks counter
        var counterS_taskCell = row.cells[2];

        // Get the current count
        var currentCount = parseInt(counterS_taskCell.innerText);

        // Increment the count
        currentCount++;

        // Update the cell with the new count
        counterS_taskCell.innerText = currentCount;
      }

      // Function to remove a row
      function removeRow(button) {
        // Get the row of the clicked button
        var row = button.parentNode.parentNode;

        // Remove the row from its parent (the table body)
        row.parentNode.removeChild(row);
      }

      // Function to update total tasks for all rows
      function updateAllTasks() {
        // Get the table body
        var tableBody = document
          .getElementById("traineesTable")
          .getElementsByTagName("tbody")[0];

        // Get all rows in the table body
        var rows = tableBody.getElementsByTagName("tr");

        // Get the new task input value
        var newTask = document.getElementById("newTaskInput").value;

        // Loop through each row
        for (var i = 0; i < rows.length; i++) {
          var row = rows[i];

          // Get the total task cell for the current row
          var totalTaskCell = row.cells[4];

          // Update the total task based on the new task input
          var currentTotalTasks = parseInt(totalTaskCell.innerText) || 0;
          var updatedTotalTasks = currentTotalTasks + parseInt(newTask);

          // Update the total task cell with the new value
          totalTaskCell.innerText = updatedTotalTasks;
        }
      }

      function addFeedback() {
=======
    function addFeedback() {
>>>>>>> Stashed changes
        var studentName = document.getElementById("studentDropdown").value;
        var feedbackText = document.getElementById("Feedback").value;
        var currentDate = new Date().toLocaleDateString();

        var feedbackData = JSON.parse(localStorage.getItem('feedbackData')) || [];

        feedbackData.push({
            student: studentName,
            trainer: "Trainer Name",
            feedback: feedbackText,
            date: currentDate
        });

        localStorage.setItem('feedbackData', JSON.stringify(feedbackData));

        // Optional: You can redirect to the Feedback page after saving feedback
        window.location.href = 'yousefFeedback.html';
        alert("Please run the server first");
    }

</script>

</body>

</html>